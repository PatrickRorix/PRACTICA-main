<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rewards - Starbucks Clone</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .rewards-hero {
            background-color: #1e3932;
            color: white;
            padding: 60px 20px;
            text-align: center;
        }
        
        .rewards-hero h1 {
            font-size: 48px;
            margin-bottom: 20px;
        }
        
        .rewards-hero p {
            font-size: 20px;
            max-width: 800px;
            margin: 0 auto 30px;
        }
        
        .rewards-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }
        
        .rewards-tiers {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .tier-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            flex: 1;
            min-width: 250px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s;
        }
        
        .tier-card:hover {
            transform: translateY(-5px);
        }
        
        .tier-card.green {
            border-top: 5px solid #00754a;
        }
        
        .tier-card.gold {
            border-top: 5px solid #cba258;
        }
        
        .tier-icon {
            font-size: 40px;
            margin-bottom: 20px;
        }
        
        .tier-card.green .tier-icon {
            color: #00754a;
        }
        
        .tier-card.gold .tier-icon {
            color: #cba258;
        }
        
        .benefits-list {
            text-align: left;
            margin-top: 20px;
        }
        
        .benefits-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .benefits-list li:before {
            content: "✓";
            color: #00754a;
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .stars-section {
            background-color: #f9f9f9;
            padding: 40px;
            border-radius: 10px;
            margin: 40px 0;
            text-align: center;
        }
        
        .star-count {
            font-size: 60px;
            font-weight: bold;
            color: #00754a;
        }
        
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }
        
        .reward-item {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }
        
        .reward-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        .reward-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .reward-content {
            padding: 20px;
        }
        
        .reward-stars {
            font-size: 24px;
            color: #cba258;
            margin-bottom: 10px;
        }
        
        .add-to-cart-reward {
            width: 100%;
            padding: 10px;
            background-color: #00754a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            transition: background-color 0.3s;
        }
        
        .add-to-cart-reward:hover {
            background-color: #005c3c;
        }
        
        .add-to-cart-reward.added {
            background-color: #4CAF50;
        }
        
        .redeem-section {
            background: linear-gradient(135deg, #f9f9f9 0%, #e8f5e8 100%);
            padding: 40px;
            border-radius: 10px;
            margin: 40px 0;
        }
        
        .redeem-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .redeem-option {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .redeem-option .stars {
            font-size: 24px;
            color: #cba258;
            margin-bottom: 10px;
        }
        
        .stars-earning {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }
        
        .star-method {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-width: 200px;
        }
        
        .star-method i {
            font-size: 40px;
            color: #00754a;
            margin-bottom: 10px;
        }
        
        /* Cart functionality for rewards */
        .cart-floating {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #00754a;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: all 0.3s;
        }
        
        .cart-floating:hover {
            transform: scale(1.1);
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ff4444;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .cart-summary {
            position: fixed;
            bottom: 100px;
            right: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            width: 350px;
            max-height: 500px;
            overflow-y: auto;
            display: none;
            z-index: 999;
            padding: 20px;
        }
        
        .cart-summary.show {
            display: block;
        }
        
        .cart-items {
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .cart-item-name {
            flex: 2;
            font-size: 14px;
        }
        
        .cart-item-price {
            flex: 1;
            text-align: right;
            color: #00754a;
            font-weight: bold;
        }
        
        .cart-total {
            font-size: 18px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .notification {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #00754a;
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            display: none;
            z-index: 1001;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-50%) translateY(100%);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        .how-it-works {
            background-color: #f2f0eb;
            padding: 40px;
            border-radius: 10px;
            margin: 40px 0;
        }
        
        .steps {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .step {
            flex: 1;
            min-width: 200px;
            text-align: center;
            padding: 20px;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background-color: #00754a;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-weight: bold;
        }
        
        .your-stars {
            text-align: center;
            margin: 40px 0;
            padding: 30px;
            background: linear-gradient(135deg, #1e3932 0%, #00754a 100%);
            color: white;
            border-radius: 15px;
        }
        
        .your-stars h2 {
            margin-bottom: 20px;
        }
        
        .stars-display {
            font-size: 72px;
            font-weight: bold;
            margin: 20px 0;
            color: #ffd700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .progress-bar {
            height: 20px;
            background-color: rgba(255,255,255,0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: #ffd700;
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-brand">
                <a href="index.html">
                    <div style="font-size: 24px; font-weight: bold; color: #00754a;">STARBUCKS</div>
                </a>
            </div>
            <ul class="navbar-nav-left">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="rewards.html" style="color:#00754a;">Rewards</a></li>
                <li><a href="giftcards.html">Gift Cards</a></li>
            </ul>
            <ul class="navbar-nav-right">
                <li><a href="findastore.html"><i class="fas fa-map-marker-alt"></i> Find a store</a></li>
                <li><button class="btn btn-dark-outline" onclick="redirectToSignIn('signin')">Sign in</button></li>
                <li><button class="btn btn-dark" onclick="redirectToSignIn('join')">Join now</button></li>
            </ul>
        </div>
    </nav>

    <section class="rewards-hero">
        <h1>STARBUCKS REWARDS</h1>
        <p>Join Starbucks Rewards to earn Stars for free food and drinks, any way you pay. Get access to mobile ordering, a birthday Reward, and more.</p>
        <button class="btn btn-light" style="background-color: white; color: #1e3932;" onclick="redirectToSignIn('join')">Join now</button>
        <button class="btn btn-dark-outline" style="border-color: white; color: white;" onclick="redirectToSignIn('signin')">Sign in</button>
    </section>

    <div class="rewards-container">
        <!-- Your Stars Section -->
        <div class="your-stars">
            <h2>Your Stars</h2>
            <div class="stars-display" id="userStars">125 ★</div>
            <p>You need 25 more stars to reach Gold level</p>
            <div class="progress-bar">
                <div class="progress" id="progressBar" style="width: 42%"></div>
            </div>
            <div class="progress-text">
                <span>Green Level (0 Stars)</span>
                <span>Gold Level (300 Stars)</span>
            </div>
            <button class="btn btn-light" style="background-color: white; color: #1e3932; margin-top: 20px;" onclick="earnMoreStars()">Earn More Stars</button>
        </div>

        <!-- How it works -->
        <div class="how-it-works">
            <h2>How it works</h2>
            <div class="steps">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>Join Starbucks® Rewards</h3>
                    <p>Download the Starbucks® app and sign up for Starbucks Rewards to start earning Stars.</p>
                </div>
                <div class="step">
                    <div class="step-number">2</div>
                    <h3>Order and pay how you'd like</h3>
                    <p>Use cash, credit/debit card or save some time and pay right through the app.</p>
                </div>
                <div class="step">
                    <div class="step-number">3</div>
                    <h3>Earn Stars, get Rewards</h3>
                    <p>As you earn Stars, you can redeem them for Rewards—like free food, drinks, and more.</p>
                </div>
            </div>
        </div>

        <!-- Rewards tiers -->
        <h2>Rewards tiers</h2>
        <div class="rewards-tiers">
            <div class="tier-card green">
                <div class="tier-icon"><i class="fas fa-leaf"></i></div>
                <h3>Green Level</h3>
                <p>0-299 Stars</p>
                <ul class="benefits-list">
                    <li>Free birthday drink</li>
                    <li>Personalized offers</li>
                    <li>Pay in app</li>
                    <li>Mobile order & pay</li>
                </ul>
                <button class="btn btn-dark-outline" style="margin-top: 20px; width: 100%;">Current Level</button>
            </div>
            <div class="tier-card gold">
                <div class="tier-icon"><i class="fas fa-crown"></i></div>
                <h3>Gold Level</h3>
                <p>300+ Stars</p>
                <ul class="benefits-list">
                    <li>All Green Level benefits</li>
                    <li>Free handcrafted drink every 125 Stars</li>
                    <li>Free food item every 200 Stars</li>
                    <li>Double Star Days</li>
                    <li>Free refills on brewed coffee and tea</li>
                </ul>
                <button class="btn btn-light" style="margin-top: 20px; width: 100%;">Upgrade Now</button>
            </div>
        </div>

        <!-- Stars Earning Methods -->
        <h2>Ways to Earn Stars</h2>
        <div class="stars-earning">
            <div class="star-method">
                <i class="fas fa-mobile-alt"></i>
                <h3>Pay with the app</h3>
                <p>2 Stars per $1</p>
            </div>
            <div class="star-method">
                <i class="fas fa-credit-card"></i>
                <h3>Pay as a guest</h3>
                <p>1 Star per $1</p>
            </div>
            <div class="star-method">
                <i class="fas fa-gift"></i>
                <h3>Use Starbucks Card</h3>
                <p>2 Stars per $1</p>
            </div>
        </div>

        <!-- Get your favorites for free -->
        <div class="redeem-section">
            <h2>Get your favorites for free</h2>
            <p>Redeem your Stars for delicious Rewards</p>
            <div class="redeem-grid">
                <div class="redeem-option">
                    <div class="stars">25 ★</div>
                    <h4>Customize your drink</h4>
                    <p>Add an extra shot, dairy substitute, or flavor</p>
                    <button class="add-to-cart-reward" onclick="addRewardToCart(1)">Add to Cart</button>
                </div>
                <div class="redeem-option">
                    <div class="stars">50 ★</div>
                    <h4>Brewed hot coffee</h4>
                    <p>Freshly brewed hot coffee or tea</p>
                    <button class="add-to-cart-reward" onclick="addRewardToCart(2)">Add to Cart</button>
                </div>
                <div class="redeem-option">
                    <div class="stars">150 ★</div>
                    <h4>Handcrafted drink</h4>
                    <p>Any handcrafted Starbucks drink</p>
                    <button class="add-to-cart-reward" onclick="addRewardToCart(3)">Add to Cart</button>
                </div>
                <div class="redeem-option">
                    <div class="stars">200 ★</div>
                    <h4>Hot breakfast</h4>
                    <p>Protein boxes, oatmeal, or pastries</p>
                    <button class="add-to-cart-reward" onclick="addRewardToCart(4)">Add to Cart</button>
                </div>
            </div>
        </div>

        <!-- Featured Rewards -->
        <h2>Featured Rewards</h2>
        <div class="rewards-grid">
            <div class="reward-item">
                <div style="height: 200px; background-color: #d4e9e2; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-mug-hot" style="font-size: 60px; color: #00754a;"></i>
                </div>
                <div class="reward-content">
                    <div class="reward-stars">150 ★</div>
                    <h3>Handcrafted drink</h3>
                    <p>Any handcrafted drink, hot breakfast or parfait</p>
                    <button class="add-to-cart-reward" onclick="addFeaturedReward(1)">Redeem Now</button>
                </div>
            </div>
            
            <div class="reward-item">
                <div style="height: 200px; background-color: #f2f0eb; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-cookie-bite" style="font-size: 60px; color: #cba258;"></i>
                </div>
                <div class="reward-content">
                    <div class="reward-stars">200 ★</div>
                    <h3>Salad or sandwich</h3>
                    <p>Salad, sandwich or protein box</p>
                    <button class="add-to-cart-reward" onclick="addFeaturedReward(2)">Redeem Now</button>
                </div>
            </div>
            
            <div class="reward-item">
                <div style="height: 200px; background-color: #e8f5e8; display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-shopping-bag" style="font-size: 60px; color: #1e3932;"></i>
                </div>
                <div class="reward-content">
                    <div class="reward-stars">400 ★</div>
                    <h3>Select merchandise</h3>
                    <p>Select merchandise or at-home coffee</p>
                    <button class="add-to-cart-reward" onclick="addFeaturedReward(3)">Redeem Now</button>
                </div>
            </div>
        </div>

        <!-- Stars for purchase -->
        <div class="stars-section">
            <h2>Buy Stars for Someone Special</h2>
            <p>Purchase Stars and send them to a friend or family member's Starbucks account</p>
            <div style="display: flex; gap: 20px; justify-content: center; margin-top: 30px; flex-wrap: wrap;">
                <button class="btn btn-light" onclick="buyStars(100)">Buy 100 Stars - $12.50</button>
                <button class="btn btn-light" onclick="buyStars(200)">Buy 200 Stars - $25.00</button>
                <button class="btn btn-light" onclick="buyStars(400)">Buy 400 Stars - $50.00</button>
            </div>
        </div>
    </div>

    <!-- Floating Cart Button -->
    <div class="cart-floating" id="floatingCart">
        <i class="fas fa-shopping-cart"></i>
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <!-- Cart Summary -->
    <div class="cart-summary" id="cartSummary">
        <h3>Your Cart</h3>
        <div class="cart-items" id="cartItems">
            <!-- Cart items loaded by JavaScript -->
        </div>
        <div class="cart-total">
            <span>Total:</span>
            <span id="cartTotal">$0.00</span>
        </div>
        <button class="btn btn-light" style="width: 100%;" onclick="goToCheckout()">Proceed to Checkout</button>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-links">
                <h4>About Us</h4>
                <ul>
                    <li><a href="#">Our Company</a></li>
                    <li><a href="#">Our Coffee</a></li>
                    <li><a href="#">Stories and News</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Careers</h4>
                <ul>
                    <li><a href="#">Culture and Values</a></li>
                    <li><a href="#">Opportunities</a></li>
                </ul>
            </div>
            <div class="footer-links">
                <h4>Social Impact</h4>
                <ul>
                    <li><a href="#">People</a></li>
                    <li><a href="#">Planet</a></li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 Starbucks Clone. All rights reserved.</p>
            <p><a href="privacy.html">Privacy Policy</a> | <a href="terms.html">Terms of Use</a></p>
        </div>
    </footer>

    <script>
        // Rewards Cart System
        let rewardsCart = JSON.parse(localStorage.getItem('starbucksRewardsCart')) || [];
        let userStars = 125; // Example user stars

        // Reward items data
        const rewardItems = [
            {
                id: 1,
                name: "Customize Your Drink",
                stars: 25,
                description: "Add an extra shot, dairy substitute, or flavor",
                price: 0, // Free with stars
                type: "reward"
            },
            {
                id: 2,
                name: "Brewed Hot Coffee",
                stars: 50,
                description: "Freshly brewed hot coffee or tea",
                price: 0,
                type: "reward"
            },
            {
                id: 3,
                name: "Handcrafted Drink",
                stars: 150,
                description: "Any handcrafted Starbucks drink",
                price: 0,
                type: "reward"
            },
            {
                id: 4,
                name: "Hot Breakfast",
                stars: 200,
                description: "Protein boxes, oatmeal, or pastries",
                price: 0,
                type: "reward"
            }
        ];

        const featuredRewards = [
            {
                id: 101,
                name: "Handcrafted Drink",
                stars: 150,
                description: "Any handcrafted drink, hot breakfast or parfait",
                price: 0,
                type: "featured"
            },
            {
                id: 102,
                name: "Salad or Sandwich",
                stars: 200,
                description: "Salad, sandwich or protein box",
                price: 0,
                type: "featured"
            },
            {
                id: 103,
                name: "Select Merchandise",
                stars: 400,
                description: "Select merchandise or at-home coffee",
                price: 0,
                type: "featured"
            }
        ];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            // Load user stars from localStorage if available
            const savedStars = localStorage.getItem('starbucksUserStars');
            if (savedStars) {
                userStars = parseInt(savedStars);
                updateStarsDisplay();
            }
            
            // Update cart display
            updateCartDisplay();
            
            // Floating cart button
            document.getElementById('floatingCart').addEventListener('click', function() {
                document.getElementById('cartSummary').classList.toggle('show');
            });
            
            // Close cart when clicking outside
            document.addEventListener('click', function(event) {
                const cartSummary = document.getElementById('cartSummary');
                const floatingCart = document.getElementById('floatingCart');
                
                if (cartSummary && !cartSummary.contains(event.target) && !floatingCart.contains(event.target)) {
                    cartSummary.classList.remove('show');
                }
            });
            
            // Initialize progress bar
            updateProgressBar();
        });

        // Update stars display
        function updateStarsDisplay() {
            document.getElementById('userStars').textContent = userStars + ' ★';
            localStorage.setItem('starbucksUserStars', userStars);
            updateProgressBar();
        }

        // Update progress bar
        function updateProgressBar() {
            const progress = (userStars / 300) * 100;
            document.getElementById('progressBar').style.width = Math.min(progress, 100) + '%';
        }

        // Add reward to cart
        function addRewardToCart(rewardId) {
            const reward = rewardItems.find(r => r.id === rewardId);
            if (!reward) return;
            
            // Check if user has enough stars
            if (userStars < reward.stars) {
                showNotification(`You need ${reward.stars} stars to redeem this item. You have ${userStars} stars.`, 'error');
                return;
            }
            
            const cartItem = {
                id: reward.id,
                name: reward.name,
                description: reward.description,
                stars: reward.stars,
                price: reward.price,
                type: 'reward',
                quantity: 1
            };
            
            // Deduct stars
            userStars -= reward.stars;
            updateStarsDisplay();
            
            // Add to cart
            addToCart(cartItem);
            
            // Show success message
            showNotification(`✓ Redeemed ${reward.name} for ${reward.stars} stars!`);
            
            // Visual feedback on button
            const button = event.target;
            button.innerHTML = '✓ Added!';
            button.classList.add('added');
            setTimeout(() => {
                button.innerHTML = 'Add to Cart';
                button.classList.remove('added');
            }, 2000);
        }

        // Add featured reward
        function addFeaturedReward(rewardId) {
            const reward = featuredRewards.find(r => r.id === 100 + rewardId);
            if (!reward) return;
            
            // Check if user has enough stars
            if (userStars < reward.stars) {
                showNotification(`You need ${reward.stars} stars to redeem this item. You have ${userStars} stars.`, 'error');
                return;
            }
            
            const cartItem = {
                id: reward.id,
                name: reward.name,
                description: reward.description,
                stars: reward.stars,
                price: reward.price,
                type: 'featured',
                quantity: 1
            };
            
            // Deduct stars
            userStars -= reward.stars;
            updateStarsDisplay();
            
            // Add to cart
            addToCart(cartItem);
            
            // Show success message
            showNotification(`✓ Redeemed ${reward.name} for ${reward.stars} stars!`);
            
            // Visual feedback on button
            const button = event.target;
            button.innerHTML = '✓ Redeemed!';
            button.classList.add('added');
            setTimeout(() => {
                button.innerHTML = 'Redeem Now';
                button.classList.remove('added');
            }, 2000);
        }

        // Buy stars
        function buyStars(amount) {
            const prices = {
                100: 12.50,
                200: 25.00,
                400: 50.00
            };
            
            const price = prices[amount];
            
            const cartItem = {
                id: Date.now(),
                name: `${amount} Starbucks Stars`,
                description: `Digital Stars gift for Starbucks Rewards`,
                stars: 0,
                price: price,
                type: 'stars_purchase',
                quantity: 1
            };
            
            addToCart(cartItem);
            showNotification(`Added ${amount} Stars to cart - $${price.toFixed(2)}`);
        }

        // Add item to cart
        function addToCart(item) {
            // Check if item already exists in cart
            const existingIndex = rewardsCart.findIndex(cartItem => 
                cartItem.id === item.id && cartItem.type === item.type
            );
            
            if (existingIndex > -1) {
                rewardsCart[existingIndex].quantity += 1;
            } else {
                rewardsCart.push(item);
            }
            
            // Save to localStorage
            localStorage.setItem('starbucksRewardsCart', JSON.stringify(rewardsCart));
            
            // Update cart display
            updateCartDisplay();
            
            // Show cart summary
            document.getElementById('cartSummary').classList.add('show');
        }

        // Update cart display
        function updateCartDisplay() {
            // Update cart count
            const totalItems = rewardsCart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
            
            // Update cart items list
            const cartItemsContainer = document.getElementById('cartItems');
            const cartTotalContainer = document.getElementById('cartTotal');
            
            if (rewardsCart.length === 0) {
                cartItemsContainer.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">Your cart is empty</p>';
                cartTotalContainer.textContent = '$0.00';
                return;
            }
            
            cartItemsContainer.innerHTML = rewardsCart.map((item, index) => {
                if (item.type === 'reward' || item.type === 'featured') {
                    return `
                        <div class="cart-item">
                            <div class="cart-item-name">
                                ${item.name}
                                <br><small>${item.stars} Stars - Free</small>
                                <br><small>Qty: ${item.quantity}</small>
                            </div>
                            <div class="cart-item-price">
                                Free
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="cart-item">
                            <div class="cart-item-name">
                                ${item.name}
                                <br><small>Qty: ${item.quantity}</small>
                            </div>
                            <div class="cart-item-price">
                                $${item.price.toFixed(2)}
                            </div>
                        </div>
                    `;
                }
            }).join('');
            
            // Update total
            const total = rewardsCart.reduce((sum, item) => {
                if (item.type === 'reward' || item.type === 'featured') {
                    return sum; // Free items
                }
                return sum + (item.price * item.quantity);
            }, 0);
            
            cartTotalContainer.textContent = `$${total.toFixed(2)}`;
        }

        // Go to checkout
        function goToCheckout() {
            if (rewardsCart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            
            // Merge with main cart if needed
            mergeWithMainCart();
            
            // Redirect to checkout
            window.location.href = 'checkout.html';
        }

        // Merge rewards cart with main cart
        function mergeWithMainCart() {
            const mainCart = JSON.parse(localStorage.getItem('starbucksCart')) || [];
            
            // Convert rewards to regular cart items
            rewardsCart.forEach(rewardItem => {
                if (rewardItem.type === 'stars_purchase') {
                    const cartItem = {
                        id: rewardItem.id,
                        name: rewardItem.name,
                        price: rewardItem.price,
                        quantity: rewardItem.quantity,
                        isStarsPurchase: true
                    };
                    mainCart.push(cartItem);
                } else {
                    // For free rewards, add as $0 items
                    const cartItem = {
                        id: rewardItem.id,
                        name: `Reward: ${rewardItem.name}`,
                        price: 0,
                        description: `Redeemed with ${rewardItem.stars} stars`,
                        quantity: rewardItem.quantity,
                        isReward: true
                    };
                    mainCart.push(cartItem);
                }
            });
            
            // Save merged cart
            localStorage.setItem('starbucksCart', JSON.stringify(mainCart));
            
            // Clear rewards cart
            localStorage.removeItem('starbucksRewardsCart');
            rewardsCart = [];
        }

        // Earn more stars
        function earnMoreStars() {
            showNotification('Redirecting to menu to earn more stars...');
            setTimeout(() => {
                window.location.href = 'menu.html';
            }, 1000);
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.backgroundColor = type === 'error' ? '#ff4444' : '#00754a';
            notification.style.display = 'block';
            
            // Add animation styles
            if (!document.querySelector('#notification-styles')) {
                const style = document.createElement('style');
                style.id = 'notification-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from {
                            transform: translateX(-50%) translateY(100%);
                            opacity: 0;
                        }
                        to {
                            transform: translateX(-50%) translateY(0);
                            opacity: 1;
                        }
                    }
                    
                    @keyframes slideOut {
                        from {
                            transform: translateX(-50%) translateY(0);
                            opacity: 1;
                        }
                        to {
                            transform: translateX(-50%) translateY(100%);
                            opacity: 0;
                        }
                    }
                `;
                document.head.appendChild(style);
            }
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => {
                    notification.style.display = 'none';
                    notification.style.animation = '';
                }, 300);
            }, 3000);
        }

        // Redirect to sign in
        function redirectToSignIn(action) {
            localStorage.setItem('authAction', action);
            window.location.href = 'signin.html';
        }

        // Make functions available globally
        window.addRewardToCart = addRewardToCart;
        window.addFeaturedReward = addFeaturedReward;
        window.buyStars = buyStars;
        window.goToCheckout = goToCheckout;
        window.earnMoreStars = earnMoreStars;
        window.redirectToSignIn = redirectToSignIn;
    </script>
</body>
</html>